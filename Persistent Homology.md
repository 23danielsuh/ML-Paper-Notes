# Persistent Homology

### Introduction to Adenocarcinomas
- Histopathology is the study of the progression of a disease through examination of biopsied tissues (images)
- Used for cancer puposes
- Needs manual assessment of the glass slides with a microscope
- We can use persistent homology on images to extract features from the image and are automatically able to learn features from the raw image format
- Can use the architecture of certain shapes to determine the presence of malignant/benign:
 ![](https://codimd.s3.shivering-isles.com/demo/uploads/upload_abbc7efb7a803892ff3474a19aefb61b.png)

### How Persistent Homology Works
- Persistent homology is a way to detect and characterize topological features at different scales
	- Topological features are connected components, loops, and voids
- We can represent persistent homology models using persistence landscapes or persistence images
- Definition of terms:
	- Simplex - A p-simplex or $\sigma p$ is defined as the convex hull of $p+1$ affinely independent point / vertices. A face of a simplex is a subset of its $p+1$ vertices
	- Simplical complex - A simplical complex $K$ is a finite collection of simplices (see above). With this, if there is a simplex in $K$, then all of its vertices will be inside of $K$. Formally, given $K$, a simplical complex $L$ formed by a subset of its simplices is the sub-complex of $K$, denoted as $L \subset K$
	- Filtration - A nested sequence of simplical complexes $\phi \subset K_1 \subset K_2 \subset\ ... \subset K_n = K$
	- Homology groups - A d-dimensional homology group $Hd(K)$ of a simplical complex $K$ is the set of all d-dimensional voids in $K$ and the rank or number of these voids is referred to as the d-dimensional Betti number $\beta_d(K)$ (???)
		- Voids - 
		- Betti number - See the Balzano Research Paper below
	- Vectoris-Rips Filtration - Given a point set, a simplical complex VR $\phi=\{\phi\ |\ diam\ \phi \leq \epsilon\}$ containing simplices of all subsets of its points whose max distance $< \epsilon$ is called a Vectoris-Rips (VR) complex. An increasing sequence of diameters or scales results in a nested sequence of VR complexes: $VR(\epsilon_1) \subset VR(\epsilon_2) \subset ... VR(\epsilon_n)$, which is known as the Vectoris-Rips (VR) filtration.
	- ![](https://www.kitware.com/main/wp-content/uploads/2018/05/homology_groups.png)
		- We can say that $VR(0)$ is just points because when $\epsilon=0$, then the max euclidean distance is 0 -> no points. We can say that $VR(\sqrt{5})$ is a fully connected shape because the max distance is the diagonal between side lengths of $2$ and $1$ -> $\sqrt{2^2+1^2}$
	- Persistence diagram - Given a filtration F, the idea of persistent homology is to track the scales at which each $d$-dim void appears/diappears as a multiset $BD_d = \{(b_i, d_i)\}$ of birth-death scales. Plotting them as 2D points produces the persistence diagram (PD) representation. This summarization of topological information as a multiset of points is not amicable for machine learning models such as NNs wherein a vectorized representation is more convenient. To plug these into NNs, persistence landscapes and persistence images are required to vectorize persistent homology models. 
	- Persistence Landscape - Given a multiset of birth-death pairs $\{(b_i, d_i)\}$ with a triangular shaped function $f(x)$ that linearly increases from $(b_i, 0)$ to $((b_i+d_i)/2, (b_i+d_i)/2)$ and then linearly decreases until $(d_i, 0)$, the persistence landscape is defined as a 2D function $\lambda:N x R \rightarrow [0, \inf]$ where $\lambda(k, x)$ is the $k$-th largest value of $\{f(x)\}$.
	- Persistence image - Given a multiset of birth-persistence values $BDd(F) = \{b_i, p_i\}$ of all d-dim voids, the persistence image (PI) representation is generated by discretizing a 2D real-valued function defined as a weighted sum of bivariate gaussian PDFs centered at each birth persistence pair as follows: $p(x, y) = \sum w(b_i, p_i) \times N(x-b_i, y-p_i; \sigma^2)$. One of the main advantages of persistence images over persistence landscapse is that persistence images lied in Euclidean space and hence are more amenable to a wide variety of ML techniques like CNNs :). They are also easier to interpret than persistence landscapes because of their resemblance to the persistence diagram

### Balzano Research Paper
- The problem involves dimensionality reduction: given a set of points in a high-dimensional space, find some smaller manifold $M$ which is a linear subspace of the high-dimensional data
- Topological features are those which are preserved bydeormations without tearing (?); a line and a parabola are topologically identical, but a line and a circle are not
- Persistent homology is supposed to reveal topological information about the manifold $M$
- Identifying a shape from a finite collection of noisy data points is called manifold learning
- The means of overcoming this problem is to replace each point with a small ball of radius $\epsilon$, which smooths the space between the data points
- The choice of $\epsilon$ is important - imagine there is a circle with a gap between some points. If we choose an $\epsilon$ too small, then we will see an arc. If we choose an $\epsilon$ correctly though, we will see the circle
- However, persistent homology avoids the necessity of fine-tuning $\epsilon$ by keeping track of what happens for *all* values of $\epsilon$
- Topological features that prsist for a wide range of $\epsilon$ are deemed to be featurers of the data set
- The topological features desired are homology groups, which means the "number of holes" in the manifold
- $H_0$ can be defnied as the number of connected components in the dataset, while $H_1$ refers to the 2-dimensional holes in the manifold, $H_2$ refers to the 3-dimensional holes, and so on
- $h_0$ and $h_1$ are integers called Betti numbers that can be attached to any manifold
- $h_0(M)$ is the number of connected components of $M$
- A point has $h_0=1$ and $h_1=0$
- A circle has $h_0=1$ and $h_1=1$
- Persistent Homology are very sensitive to outliers (if the outliers are uninteresting points, then it makes sense to clean them out)
- "How long is long enough to be called persistent" is not a well-understood concept

### TDALabs Notes
- There are certain patterns in the persistence diagram that indicate a certain shape. For example, lots of noise with $H_1$ and a defined persistent point with $H_2$ likely means that there is a sphere
- 

### PD Research Paper
- 