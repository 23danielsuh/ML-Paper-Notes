# Persistent Homology on Images

### Introduction to Adenocarcinomas
- Histopathology is the study of the progression of a disease through examination of biopsied tissues (images)
- Used for cancer puposes
- Needs manual assessment of the glass slides with a microscope
- We can use persistent homology on images to extract features from the image and are automatically able to learn features from the raw image format
- Can use the architecture of certain shapes to determine the presence of malignant/benign:
 ![](https://codimd.s3.shivering-isles.com/demo/uploads/upload_abbc7efb7a803892ff3474a19aefb61b.png)

### How Persistent Homology Works
- Persistent homology is a way to detect and characterize topological features at different scales
	- Topological features are connected components, loops, and voids
- We can represent persistent homology models using persistence landscapes or persistence images
- Definition of terms:
	- Simplex - A p-simplex or $\sigma p$ is defined as the convex hull of $p+1$ affinely independent point / vertices. A face of a simplex is a subset of its $p+1$ vertices
	- Simplical complex - A simplical complex $K$ is a finite collection of simplices (see above). With this, if there is a simplex in $K$, then all of its vertices will be inside of $K$. Formally, given $K$, a simplical complex $L$ formed by a subset of its simplices is the sub-complex of $K$, denoted as $L \subset K$ ^275837
	- Filtration - A nested sequence of simplical complexes $\phi \subset K_1 \subset K_2 \subset\ ... \subset K_n = K$
	- Homology groups - A d-dimensional homology group $Hd(K)$ of a simplical complex $K$ is the set of all d-dimensional voids in $K$ and the rank or number of these voids is referred to as the d-dimensional Betti number $\beta_d(K)$ (???)
		- Voids - Very informally can be defined as $i$-dimensional holes
		- Betti number - See [[Balzano Research Paper on Persistent Homology#^839b7f]] 
	- Vectoris-Rips Filtration - Given a point set, a simplical complex VR $\phi=\{\phi\ |\ diam\ \phi \leq \epsilon\}$ containing simplices of all subsets of its points whose max distance $< \epsilon$ is called a Vectoris-Rips (VR) complex. An increasing sequence of diameters or scales results in a nested sequence of VR complexes: $VR(\epsilon_1) \subset VR(\epsilon_2) \subset ... VR(\epsilon_n)$, which is known as the Vectoris-Rips (VR) filtration. ^08366f
		- We choose $\epsilon$ carefully (see [[Balzano Research Paper on Persistent Homology#^9285af]])
	- ![](https://www.kitware.com/main/wp-content/uploads/2018/05/homology_groups.png)
		- We can say that $VR(0)$ is just points because when $\epsilon=0$, then the max euclidean distance is 0 -> no points. We can say that $VR(\sqrt{5})$ is a fully connected shape because the max distance is the diagonal between side lengths of $2$ and $1$ -> $\sqrt{2^2+1^2}$
	- Persistence diagram - Given a filtration F, the idea of persistent homology is to track the scales at which each $d$-dim void appears/diappears as a multiset $BD_d = \{(b_i, d_i)\}$ of birth-death scales. Plotting them as 2-D points produces the persistence diagram (PD) representation. This summarization of topological information as a multiset of points is not amicable for machine learning models such as NNs wherein a vectorized representation is more convenient. To plug these into NNs, persistence landscapes and persistence images are required to vectorize persistent homology models. 
	- Persistence Landscape - Given a multiset of birth-death pairs $\{(b_i, d_i)\}$ with a triangular shaped function $f(x)$ that linearly increases from $(b_i, 0)$ to $((b_i+d_i)/2, (b_i+d_i)/2)$ and then linearly decreases until $(d_i, 0)$, the persistence landscape is defined as a 2D function $\lambda:N x R \rightarrow [0, \inf]$ where $\lambda(k, x)$ is the $k$-th largest value of $\{f(x)\}$.
	- Persistence image - Given a multiset of birth-persistence values $BDd(F) = \{b_i, p_i\}$ of all d-dim voids, the persistence image (PI) representation is generated by discretizing a 2D real-valued function defined as a weighted sum of bivariate gaussian PDFs centered at each birth persistence pair as follows: $p(x, y) = \sum w(b_i, p_i) \times N(x-b_i, y-p_i; \sigma^2)$. One of the main advantages of persistence images over persistence landscapse is that persistence images lied in Euclidean space and hence are more amenable to a wide variety of ML techniques like CNNs :). They are also easier to interpret than persistence landscapes because of their resemblance to the persistence diagram